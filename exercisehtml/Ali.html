<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="../exercisecss/layout.css">
    <title></title>
    <style>
    body{
      margin:0;
    }
    div{
      margin: 10px;
      border:solid black 1px;
      padding: 20px 40px;

    }
    div#box-1{
      height: 500px;
      width: 500px;
      background-color:red;
      position: relative;
    }
    div#box-2{
      height: 300px;
      width: 300px;
      background-color: green;
      position: relative;
    }

    p{
      color:white;
      font-size: bold;
    }
    </style>
  </head>
  <body>
    <div id="box-1">
      <p>box1</p>
      <div id ="box-2">
        <P>box2</p>
        </div>
        </div>
      <script>
        window.onload=function(){



      var newstyle = document.getElementsByTagName("style")[0];

      newstyle.setAttribute("id", "addStyle");
      // document.body.appendChild(newstyle);
      // console.log(document.getElementsByTagName('head'));
      /*document.getElementsByTagName('head')[0].appendChild(newstyle);

      document.getElementById('box-1').style.position="fixed";
      document.getElementById('box-2').style.position="fixed";
      document.getElementById('box-2').style.top="50px";
      var preY = 0;*/
      // console.log(Y);
      // 定义速度初始值
      var speed = 100;

      var scrollFunc=function(e){

        e=e || window.event;// IE6/7/8 e为undefined  IE9中e为W3标准事件对象。

        // 清空动画
       document.getElementById('box-1').style.animation="";
        document.getElementById('box-2').style.animation="";

          // 定义本次滚动的距离，判断是上下滚动
          var distance = e.deltaY;
          // 用滚动距离来比拟速度
          var speed2 = distance/speed;
          // 或者当前滚动的高度
          var curY = document.body.scrollTop;
          var newStyle2 = document.getElementById('addStyle');
          // 向上滚动
          if (distance > 0) {

            // 传入动态滚动距离
            newStyle2.innerHTML = '@-webkit-keyframes toDown{0%   {top:0px;}50%   {top:'+distance+'px;}100% {top:0px;}}\n'+ '@keyframes toDown {0%   {top:0px;}50%   {top:'+distance+'px;}100% {top:0px;}}\n'+'@-webkit-keyframes toDown2{0%   {top:50px;}50%   {top:'+2*distance+'px;}100% {top:50px;}}\n'+ '@keyframes toDown2 {0%   {top:50px;}50%   {top:'+2*distance+'px;}100% {top:50px;}}\n';

            document.getElementById("box-1").style.animation="toDown "+speed2/2+"s";
            document.getElementById("box-2").style.animation="toDown2 "+speed2/3+"s";
          // 向下滚动
          }else{
            // console.log("向上滚动");
            // 传入动态滚动距离
            newStyle2.innerHTML = '@-webkit-keyframes toDown{0%   {top:0px;}50%   {top:'+(-distance)+'px;}100% {top:0px;}}\n'+ '@keyframes toDown {0%   {top:0px;}50%   {top:'+(-distance)+'px;}100% {top:0px;}}\n'+'@-webkit-keyframes toDown2{0%   {top:50px;}50%   {top:'+2*(-distance)+'px;}100% {top:50px;}}\n'+ '@keyframes toDown2 {0%   {top:50px;}50%   {top:'+2*(-distance)+'px;}100% {top:50px;}}\n';

            document.getElementById("box-1").style.animation="toDown "+(-speed2/2)+"s";
            ;
            document.getElementById("box-2").style.animation="toDown2 "+(-speed2/3)+"s";
            ;
          }
      }
      // 注册监听鼠标滚动事件
      if(document.addEventListener){
        document.addEventListener('DOMMouseScroll',scrollFunc,false);
      }//W3C
      //IE/Opera/Chrome
      window.onmousewheel=document.onmousewheel=scrollFunc;
    }
      </script>
  </body>
</html>



/*var path = [];
var current = arguments[0];
while(current.localName){
    if(current.id){
        path.push("#"+current.id);
    }
    if(current.className){
        var tmp = current.className.split(" ");
        var str = "";
        for(var i in tmp){
            str += "."+tmp[i];
        }
        path.push(str);
    }
    if(!current.id && !current.className){
        path.push(current.localName)
    }
    current = current.parentNode;
}
path.reverse();
return path.toString().replace(/\,/g," ");
}*/
/*  var obj = arguments[0];  //被点击的对象
      var parentObj = obj.parentNode;   //被点击对象的父对象节点
      var nodeTagName = obj.nodeName.toLowerCase();   //将各个节点名放在这里面，最后面作为函数返回值
      // 循环，直到文档根节点document结束循环,文档节点docuemnt的nodeName值为'#document'
      while( parentObj.nodeName.toLowerCase() != '#document' ){
          if( parentObj.id != '' ){//注意nodeName属性返回节点的名字基本上是大写，所以用toLowerCase()函数转换为全部都是小写的名称
              // 父节点有id属性
              nodeTagName = '#' + parentObj.id + ' ' + nodeTagName;
              parentObj = parentObj.parentNode;
          }else if( parentObj.className !='' ){
              // 有属性类,可能有多个
              nodeTagName = ' ' + nodeTagName;
              var list = parentObj.className.split(' ');
              for(var i=list.length-1;i>=0;i--){
                  nodeTagName = '.' + list[i] + nodeTagName;
              }
              parentObj = parentObj.parentNode;
          }else{
              // 没有id class属性的标签
              nodeTagName = parentObj.nodeName.toLowerCase() + ' ' + nodeTagName;
              parentObj = parentObj.parentNode;
          }
      }
      return nodeTagName;*/
